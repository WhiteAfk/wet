<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chuyển khoản ngân hàng. Tạo mã QR và chuyển khoản dễ dàng qua MB Bank.">
    <meta name="keywords" content="Chuyển khoản, Ngân hàng, MB Bank, QR Code">
    <meta property="og:title" content="Chuyển khoản Ngân hàng">
    <meta property="og:description" content="Chuyển khoản qua MB Bank với mã QR">
    <meta property="og:type" content="website">
    <link rel="canonical" href="https://wet-dev.netlify.app/bank.html">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-2bnTW3xvzqMtNAlQyMsgxx3r8mOGMQRLIUQwp2rywI+95d8DwxatJqr8z21FC5RFsAVV0m0DT5fKFm7mYL/D0w==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="css/bank.css">
    <link rel="stylesheet" href="css/animations.css">
    <title>Chuyển khoản Ngân hàng | wET</title>
</head>
<body>
    <!-- Copy Notification -->
    <div class="copy-notification" role="alert" aria-live="polite">
        <i class="fas fa-check-circle"></i>
        <span>Đã sao chép vào clipboard!</span>
    </div>
    
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-icon">
                <i class="fas fa-university"></i>
            </div>
            <h1>Chuyển khoản ngân hàng</h1>
            <p class="subtitle">Cảm ơn bạn đã quan tâm ủng hộ. Vui lòng điền thông tin bên dưới.</p>
        </header>
        
        <!-- Payment Grid -->
        <div class="payment-grid">
            <!-- Left Column: Info -->
            <div class="left-column">
                <!-- Bank Info Card -->
                <div class="info-card">
                    <h2><i class="fas fa-info-circle"></i> Thông tin tài khoản</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label"><i class="fas fa-university"></i> Ngân hàng</span>
                            <span class="value">MB Bank (Ngân hàng Quân Đội)</span>
                        </div>
                        <div class="info-item">
                            <span class="label"><i class="fas fa-credit-card"></i> Số tài khoản</span>
                            <span class="value highlight" onclick="copyToClipboard('5088882345', 'số tài khoản')" role="button" tabindex="0" title="Nhấp để sao chép">5088882345</span>
                        </div>
                        <div class="info-item">
                            <span class="label"><i class="fas fa-user"></i> Chủ tài khoản</span>
                            <span class="value highlight" onclick="copyToClipboard('Võ Anh Vĩnh Kỳ', 'tên tài khoản')" role="button" tabindex="0" title="Nhấp để sao chép">Võ Anh Vĩnh Kỳ</span>
                        </div>
                    </div>
                </div>

                <!-- Notice Card -->
                <div class="notice-card" role="complementary">
                    <div class="notice-header">
                        <i class="fas fa-shield-alt"></i>
                        <h3>Vui lòng kiểm tra kỹ thông tin</h3>
                    </div>
                    <ul class="notice-list">
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Tên người nhận: <strong>Võ Anh Vĩnh Kỳ</strong></span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Số tài khoản: <strong>5088882345</strong></span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Số tiền chuyển khoản phải khớp với số tiền đã nhập</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Nội dung chuyển khoản phải giống như bạn đã điền</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Right Column: Form -->
            <div class="right-column">
                <div class="form-card">
                    <h2><i class="fas fa-qrcode"></i> Tạo mã QR chuyển khoản</h2>
                    <div class="form-content">
                        <!-- Amount Input -->
                        <div class="input-group">
                            <label for="amount"><i class="fas fa-coins"></i> Số tiền chuyển khoản</label>
                            <div class="input-wrapper">
                                <input type="text" id="amount" placeholder="Nhập số tiền (VD: 10,000 VNĐ)" autocomplete="off" inputmode="numeric">
                                <span class="input-icon">VNĐ</span>
                            </div>
                        </div>

                        <!-- Message Input -->
                        <div class="input-group">
                            <label for="addInfo"><i class="fas fa-comment-alt"></i> Nội dung chuyển khoản</label>
                            <div class="input-wrapper">
                                <input type="text" id="addInfo" placeholder="Nhập nội dung chuyển khoản" autocomplete="off">
                            </div>
                        </div>

                        <!-- Hidden Account Name -->
                        <input type="hidden" id="accountName" value="Vo Anh Vinh Ky">
                        
                        <!-- Generate Button -->
                        <button class="btn-generate" id="generateBtn" onclick="generateQR()" type="button">
                            <span class="btn-content">
                                <i class="fas fa-qrcode"></i>
                                <span>Tạo mã QR</span>
                            </span>
                        </button>

                        <!-- QR Container -->
                        <div class="qr-container">
                            <img id="qrImage" class="qr-code" alt="QR Code chuyển khoản" oncontextmenu="return false" ondragstart="return false">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Back Link -->
        <footer class="back-link">
            <a href="donate.html" class="back-button" title="Quay lại trang Donate">
                <i class="fas fa-arrow-left"></i>
                <span>Quay lại trang Donate</span>
            </a>
        </footer>
    </div>

    <script src="js/animations.js" defer></script>
    <script>
        // Copy to Clipboard Function
        function copyToClipboard(text, type) {
            navigator.clipboard.writeText(text).then(() => {
                const notification = document.querySelector('.copy-notification');
                notification.classList.add('show');
                notification.querySelector('span').textContent = `Đã sao chép ${type} vào clipboard!`;
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 2000);
            }).catch(err => {
                console.error('Copy error:', err);
            });
        }

        // Generate QR Code
        function generateQR() {
            const amount = document.getElementById('amount').value.trim().replace(/[,.]/g, '');
            const addInfo = document.getElementById('addInfo').value.trim();
            const accountName = document.getElementById('accountName').value;
            const qrImage = document.getElementById('qrImage');
            const btn = document.getElementById('generateBtn');

            // Validation
            if (!amount || isNaN(amount) || amount <= 0) {
                alert('Vui lòng nhập số tiền hợp lệ');
                document.getElementById('amount').focus();
                return;
            }

            if (!addInfo) {
                alert('Vui lòng nhập lời nhắn của bạn');
                document.getElementById('addInfo').focus();
                return;
            }

            // Disable button
            btn.disabled = true;
            btn.style.opacity = '0.7';
            qrImage.style.opacity = '0.5';
            qrImage.style.display = 'block';

            const formattedAmount = parseInt(amount).toLocaleString('vi-VN') + ' VNĐ';

            const newImage = new Image();
            newImage.onload = function() {
                qrImage.src = this.src;
                qrImage.style.opacity = '1';
                btn.disabled = false;
                btn.style.opacity = '1';
                qrImage.style.animation = 'fadeIn 0.5s ease-out forwards';
            };
            
            newImage.onerror = function() {
                alert('Có lỗi xảy ra khi tạo mã QR. Vui lòng thử lại!');
                qrImage.style.display = 'none';
                btn.disabled = false;
                btn.style.opacity = '1';
            };
            
            newImage.src = `https://img.vietqr.io/image/MBBank-5088882345-qr_only.png?amount=${amount}&addInfo=${encodeURIComponent(addInfo)}&accountName=${encodeURIComponent(accountName)}`;
        }

        // Format Amount Input
        document.getElementById('amount').addEventListener('input', function(e) {
            let value = this.value.replace(/\D/g, '');
            if (value) {
                value = parseInt(value).toLocaleString('vi-VN');
                this.value = value;
            }
        });

        // Enter to Generate
        document.getElementById('addInfo').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQR();
            }
        });

        // Copy to Clipboard on Enter for Amount
        document.getElementById('amount').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('addInfo').focus();
            }
        });
    </script>
</body>
</html>
